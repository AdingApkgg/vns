(()=>{function ae(){try{Ee(),ye(),Pe(),Se(),pe(),me(),ge(),Te(),De(),Ie(),ke(),Ce(),Le(),Ne(),We(),_e(),le()}catch(e){console.error("initializePage error:",e)}finally{oe()}}function le(){let e=document.getElementById("toc-trigger"),n=document.getElementById("toc-overlay"),t=document.getElementById("toc-sidebar"),a=document.getElementById("toc-close");if(!e||!t)return;requestAnimationFrame(()=>{t.classList.add("ready")});let c=()=>{t.classList.add("active"),n.classList.add("active"),document.body.style.overflow="hidden"},r=()=>{t.classList.remove("active"),n.classList.remove("active"),document.body.style.overflow=""};e.addEventListener("click",c),n.addEventListener("click",r),a.addEventListener("click",r),document.addEventListener("keydown",v=>{v.key==="Escape"&&t.classList.contains("active")&&r()});let p=t.querySelector("#TableOfContents");if(p){p.querySelectorAll("li").forEach(b=>{if(b.querySelector(":scope > ul, :scope > ol")){b.classList.add("has-children");let f=b.querySelector(":scope > a");f&&f.addEventListener("click",I=>{I.preventDefault(),b.classList.toggle("open")})}else{let f=b.querySelector("a");f&&f.addEventListener("click",()=>{r()})}});let v=p.querySelector(":scope > ul > li.has-children, :scope > ol > li.has-children");v&&v.classList.add("open")}}var G={el:null,startTime:null,minDuration:500,_hideTimerId:null,getEl(){return this.el||(this.el=document.getElementById("loader")),this.el},start(){this._hideTimerId&&(clearTimeout(this._hideTimerId),this._hideTimerId=null),this.startTime=Date.now();var e=this.getEl();e&&e.classList.remove("loading")},hide(){document.body.style.overflow="auto";var e=this.getEl();e&&e.classList.add("loading")},end(){if(!this._hideTimerId){if(!this.startTime){this.hide();return}var e=Date.now()-this.startTime;if(this.startTime=null,e>=this.minDuration)this.hide();else{var n=this.minDuration-e,t=this;this._hideTimerId=setTimeout(function(){t._hideTimerId=null,t.hide()},n)}}}};function oe(){G.end()}(function(){var e=document.getElementById("loader");e&&e.addEventListener("click",oe)})();var ue={init(){swup.hooks.on("animation:out:start",()=>{G.start()}),swup.hooks.on("content:replace",()=>{he(),G.end()}),swup.hooks.on("page:view",()=>{ae()})}};document.addEventListener("DOMContentLoaded",ae);ue.init();function me(){firework({excludeElements:[],particles:[{shape:"circle",move:["emit"],easing:"easeOutExpo",colors:["rgba(255,182,185,.9)","rgba(250,227,217,.9)","rgba(187,222,214,.9)","rgba(138,198,209,.9)"],number:30,duration:[1200,1800],shapeOptions:{radius:[16,32]}},{shape:"circle",move:["diffuse"],easing:"easeOutExpo",colors:["#FFF"],number:1,duration:[1200,1800],shapeOptions:{radius:20,alpha:.5,lineWidth:6}}]})}function pe(){let e=document.querySelectorAll("img");lozad(e).observe()}function ge(){typeof mediumZoom>"u"||(window._mediumZoomInstance&&window._mediumZoomInstance.detach(),window._mediumZoomInstance=mediumZoom("[data-zoomable]",{margin:24,background:"rgba(0, 0, 0, 0.9)",scrollOffset:40}))}function he(){bszCaller.fetch("//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback",function(e){bszTag.texts(e),bszTag.shows()})}var ve={header:null,menuToggle:null,fixedThreshold:200,isOpen:!1,_scrollInitialized:!1,init(){var e=document.getElementById("menuToggle");if(e){var n=e.dataset.target||"header",t=document.querySelector(n);if(t){if(this.menuToggle=e,this.header=t,!this.menuToggle._navBound){var a=this;this.menuToggle.addEventListener("click",function(){a.toggle()}),this.menuToggle._navBound=!0}if(!this._scrollInitialized){var a=this;window.addEventListener("scroll",function(){a.handleScroll()},{passive:!0}),document.addEventListener("keydown",function(r){r.key==="Escape"&&a.isOpen&&a.close()}),this._scrollInitialized=!0}}}},toggle(){this.isOpen=!this.isOpen,this.header.classList.toggle("active",this.isOpen),this.menuToggle.setAttribute("aria-expanded",this.isOpen)},close(){this.isOpen=!1,this.header.classList.remove("active"),this.menuToggle.setAttribute("aria-expanded","false")},handleScroll(){if(this.header){var e=window.scrollY>this.fixedThreshold;this.header.classList.toggle("fixed",e)}}},we={button:null,showThreshold:300,isVisible:!1,init(){this.button=document.getElementById("back-to-top"),this.button&&(this.button.addEventListener("click",()=>this.scrollToTop()),window.addEventListener("scroll",()=>this.handleScroll(),{passive:!0}),this.handleScroll())},handleScroll(){let e=window.scrollY>this.showThreshold;e!==this.isVisible&&(this.isVisible=e,this.button.classList.toggle("show",e))},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}};function ye(){ve.init()}function Se(){we.init()}function Ie(){var e=document.querySelector("#search");if(e){var n=new PagefindUI({element:"#search",pageSize:10,showSubResults:!0,resetStyles:!1}),t=new URLSearchParams(window.location.search),a=t.get("q");a&&setTimeout(function(){var c=e.querySelector(".pagefind-ui__search-input");c&&(c.value=a,c.dispatchEvent(new Event("input",{bubbles:!0})))},100)}}function Ee(){let e=localStorage.getItem("ageVerificationTime"),n=10080*60*1e3,t=new Date().getTime();if(!e||t-parseInt(e)>n){document.getElementById("caution").style.display="block";let a=document.querySelector("#caution .btn-yes"),c=document.querySelector("#caution .btn-no");a.addEventListener("click",function(){localStorage.setItem("ageVerificationTime",t.toString()),document.getElementById("caution").style.display="none",setTimeout(function(){new Audio("/media/suki.mp3").play()},500)}),c.addEventListener("click",function(){window.location.href="//player.bilibili.com/player.html?bvid=BV1GJ411x7h7"})}else document.getElementById("caution").style.display="none"}function Te(){let e=document.querySelector("#item-random");e&&e.addEventListener("click",n=>{n.preventDefault(),fetch("/p/index.xml").then(t=>{if(!t.ok)throw new Error("Failed to fetch index.xml");return t.text()}).then(t=>{let r=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("link"),p=Array.from(r).map(b=>b.textContent).filter(b=>b!=="{{ .Site.BaseURL }}");if(!p||p.length===0){document.body.innerHTML="<p>No random pages found. Please try again.</p>";return}let v=p[Math.floor(Math.random()*p.length)];swup.navigate(v)}).catch(t=>{document.body.innerHTML="<p>Error loading random page. Please try again.</p>"})})}function ke(){let e={h:"/",d:"/docs/",t:"/tags/",p:"/platforms/",c:"/comments/",l:"/links/",a:"/about/",r:"/rank/","/":"/search/"},n=new Set,t=!1;document.addEventListener("keydown",a=>{let c=a.target;if(c.tagName==="INPUT"||c.tagName==="TEXTAREA"||c.isContentEditable)return;let r=a.key.toLowerCase();if(n.add(r),!t&&n.has("v")&&r!=="v"&&e[r]){a.preventDefault(),t=!0;let p=e[r];window.location.pathname!==p&&swup.navigate(p)}}),document.addEventListener("keyup",a=>{n.delete(a.key.toLowerCase()),t=!1})}function Ce(){document.querySelectorAll(".highlight pre code").forEach(e=>{let n=e.getAttribute("data-lang")||"code",t=document.createElement("span");t.textContent=n,t.style=`
    position: absolute;
    bottom: 8px; right: 32px;
    font-size: 12px;
    color: #89b4fa;
    font-family: monospace;
    pointer-events: none;
    z-index: 1;
  `,e.parentElement.style.position="relative",e.parentElement.appendChild(t)})}function Le(){document.querySelector("div.highlight")&&(document.querySelectorAll("pre code").forEach(n=>{let t=document.createElement("button");t.className="copy-btn",t.dataset.clipboardText=n.textContent.trim(),t.innerHTML='<i class="fa-regular fa-copy"></i>',n.parentNode.style.position="relative",n.parentNode.appendChild(t)}),new ClipboardJS(".copy-btn").on("success",n=>{n.trigger.innerHTML='<i class="fa-solid fa-check"></i>',setTimeout(()=>n.trigger.innerHTML='<i class="fa-regular fa-copy"></i>',1500)}))}var xe={appId:"BnlZFCN5ghutLVVEX0el3pz3-MdYXbMMI",appKey:"OvpvXLKwajI2qYE4XsNMokpW",serverURLs:"https://valine.saop.cc",placeholder:`\u6635\u79F0\u680F\u8F93\u5165 QQ \u53F7\u5373\u53EF\u83B7\u53D6\u5934\u50CF\u4E0E\u90AE\u7BB1..
\u8BC4\u8BBA\u652F\u6301\u6807\u51C6\u7684 Markdown \u5168\u8BED\u6CD5~`,avatar_cdn:"https://weavatar.com/avatar/",emojiCDN:"//twikoo-magic.oss-cn-hangzhou.aliyuncs.com/",pageSize:20,visitor:!1,comment_count:!1,highlight:!0,recordIP:!0,enableQQ:!0},Me=(()=>{let e={};return["OK","aini","aixin","aoman","baiyan","bangbangtang","baojin","baoquan","bishi","bizui","cahan","caidao","chi","ciya","dabing","daku","dan","deyi","doge","fadai","fanu","fendou","ganga","gouyin","guzhang","haixiu","hanxiao","haobang","haqian","hecai","hexie","huaixiao","jie","jingkong","jingxi","jingya","juhua","keai","kelian","koubi","ku","kuaikule","kulou","kun","lanqiu","leiben","lenghan","liuhan","liulei","nanguo","penxue","piezui","pijiu","qiang","qiaoda","qinqin","qiudale","quantou","saorao","se","shengli","shouqiang","shuai","shui","tiaopi","touxiao","tu","tuosai","weiqu","weixiao","woshou","wozuimei","wunai","xia","xiaojiujie","xiaoku","xiaoyanger","xieyanxiao","xigua","xu","yangtuo","yinxian","yiwen","youhengheng","youling","yun","zaijian","zhayanjian","zhemo","zhouma","zhuakuang","zuohengheng"].forEach(a=>{e[`QQ-${a}`]=`QQ/${a}.gif`}),e["\u8D34\u5427\u65B0\u8868\u60C5-image_emoticon"]="Tieba-New/image_emoticon.png",[[2,50],[66,124]].forEach(([a,c])=>{for(let r=a;r<=c;r++)e[`\u8D34\u5427\u65B0\u8868\u60C5-image_emoticon${r}`]=`Tieba-New/image_emoticon${r}.png`}),e})(),V=null;function De(){V&&clearTimeout(V),V=setTimeout(()=>{let e=document.getElementById("vcomments");e&&(e.innerHTML="",new Valine({el:"#vcomments",path:window.location.pathname,emojiMaps:Me,...xe}))},500)}window.localStorage.getItem("fpson")==null||window.localStorage.getItem("fpson")=="1"?(te=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,16.666666666666668)}})(),$=0,ne=0,U=Date.now(),Z=Date.now(),Q=function(){var e=Date.now(),n=e-Z,t=Math.round(1e3/n);if(Z=e,ne++,$++,e>1e3+U){var t=Math.round($*1e3/(e-U));if(t<=5)var a='<span style="color:#bd0000">\u5361\u6210ppt\u{1F922}</span>';else if(t<=15)var a='<span style="color:red">\u7535\u7ADE\u7EA7\u5E27\u7387\u{1F616}</span>';else if(t<=25)var a='<span style="color:orange">\u6709\u70B9\u96BE\u53D7\u{1F628}</span>';else if(t<35)var a='<span style="color:#9338e6">\u4E0D\u592A\u6D41\u7545\u{1F644}</span>';else if(t<=45)var a='<span style="color:#08b7e4">\u8FD8\u4E0D\u9519\u54E6\u{1F601}</span>';else var a='<span style="color:#39c5bb">\u5341\u5206\u6D41\u7545\u{1F923}</span>';document.getElementById("fps").innerHTML=`FPS:${t} ${a}`,$=0,U=e}te(Q)},Q()):document.getElementById("fps").style="display:none!important";var te,$,ne,U,Z,Q,se=new MutationObserver(function(e){let n=document.querySelector(".aplayer-icon-lrc");n&&(setTimeout(function(){n.click()},1),se.disconnect())});se.observe(document,{childList:!0,subtree:!0});function Pe(){var e=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,41696,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560],n=[31,28,31,30,31,30,31,31,30,31,30,31],t=["\u7532","\u4E59","\u4E19","\u4E01","\u620A","\u5DF1","\u5E9A","\u8F9B","\u58EC","\u7678"],a=["\u5B50","\u4E11","\u5BC5","\u536F","\u8FB0","\u5DF3","\u5348","\u672A","\u7533","\u9149","\u620C","\u4EA5"],c=["\u9F20","\u725B","\u864E","\u5154","\u9F99","\u86C7","\u9A6C","\u7F8A","\u7334","\u9E21","\u72D7","\u732A"],r=["\u5C0F\u5BD2","\u5927\u5BD2","\u7ACB\u6625","\u96E8\u6C34","\u60CA\u86F0","\u6625\u5206","\u6E05\u660E","\u8C37\u96E8","\u7ACB\u590F","\u5C0F\u6EE1","\u8292\u79CD","\u590F\u81F3","\u5C0F\u6691","\u5927\u6691","\u7ACB\u79CB","\u5904\u6691","\u767D\u9732","\u79CB\u5206","\u5BD2\u9732","\u971C\u964D","\u7ACB\u51AC","\u5C0F\u96EA","\u5927\u96EA","\u51AC\u81F3"],p=["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],v=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341"],b=["\u521D","\u5341","\u5EFF","\u5345"],g=["\u6B63","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u51AC","\u814A"];function f(i){var o,d=348;for(o=32768;o>8;o>>=1)d+=e[i-1900]&o?1:0;return d+S(i)}function I(i){return 15&e[i-1900]}function S(i){return I(i)?65536&e[i-1900]?30:29:0}function C(i,o){return o>12||o<1?-1:e[i-1900]&65536>>o?30:29}function M(i,o){if(o>12||o<1)return-1;var d=o-1;return d===1?i%4==0&&i%100!=0||i%400==0?29:28:n[d]}function E(i){var o=(i-3)%10,d=(i-3)%12;return o===0&&(o=10),d===0&&(d=12),t[o-1]+a[d-1]}function W(i,o){return"\u9B54\u7FAF\u6C34\u74F6\u53CC\u9C7C\u767D\u7F8A\u91D1\u725B\u53CC\u5B50\u5DE8\u87F9\u72EE\u5B50\u5904\u5973\u5929\u79E4\u5929\u874E\u5C04\u624B\u9B54\u7FAF".substr(2*i-(o<[20,19,21,21,21,22,23,23,23,23,22,22][i-1]?2:0),2)+"\u5EA7"}function T(i){return t[i%10]+a[i%12]}function j(i,o){if(i<1900||i>2100||o<1||o>24)return-1;var d=p[i-1900],s=[parseInt("0x"+d.substr(0,5)).toString(),parseInt("0x"+d.substr(5,5)).toString(),parseInt("0x"+d.substr(10,5)).toString(),parseInt("0x"+d.substr(15,5)).toString(),parseInt("0x"+d.substr(20,5)).toString(),parseInt("0x"+d.substr(25,5)).toString()],L=[s[0].substr(0,1),s[0].substr(1,2),s[0].substr(3,1),s[0].substr(4,2),s[1].substr(0,1),s[1].substr(1,2),s[1].substr(3,1),s[1].substr(4,2),s[2].substr(0,1),s[2].substr(1,2),s[2].substr(3,1),s[2].substr(4,2),s[3].substr(0,1),s[3].substr(1,2),s[3].substr(3,1),s[3].substr(4,2),s[4].substr(0,1),s[4].substr(1,2),s[4].substr(3,1),s[4].substr(4,2),s[5].substr(0,1),s[5].substr(1,2),s[5].substr(3,1),s[5].substr(4,2)];return parseInt(L[o-1])}function P(i){if(i>12||i<1)return-1;var o=g[i-1];return o+="\u6708"}function _(i){var o;switch(i){case 10:o="\u521D\u5341";break;case 20:o="\u4E8C\u5341";break;case 30:o="\u4E09\u5341";break;default:o=b[Math.floor(i/10)],o+=v[i%10]}return o}function B(i){return c[(i-4)%12]}function R(i,o,d){if(i<1900||i>2100||i===1900&&o===1&&d<31)return-1;var s,L,x=null,k=0;i=(x=i?new Date(i,parseInt(o)-1,d):new Date).getFullYear(),o=x.getMonth()+1,d=x.getDate();var w=(Date.UTC(x.getFullYear(),x.getMonth(),x.getDate())-Date.UTC(1900,0,31))/864e5;for(s=1900;s<2101&&w>0;s++)w-=k=f(s);w<0&&(w+=k,s--);var N=new Date,A=!1;N.getFullYear()===i&&N.getMonth()+1===o&&N.getDate()===d&&(A=!0);var q=x.getDay(),H=v[q];q===0&&(q=7);var O=s;L=I(s);var D=!1;for(s=1;s<13&&w>0;s++)L>0&&s===L+1&&D===!1?(--s,D=!0,k=S(O)):k=C(O,s),D===!0&&s===L+1&&(D=!1),w-=k;w===0&&L>0&&s===L+1&&(D?D=!1:(D=!0,--s)),w<0&&(w+=k,--s);var J=s,K=w+1,ce=o-1,re=E(O),X=j(i,2*o-1),be=j(i,2*o),ee=T(12*(i-1900)+o+11);d>=X&&(ee=T(12*(i-1900)+o+12));var F=!1,Y=null;X===d&&(F=!0,Y=r[2*o-2]),be===d&&(F=!0,Y=r[2*o-1]);var fe=T(Date.UTC(i,ce,1,0,0,0,0)/864e5+25567+10+d-1),de=W(o,d);return{lYear:O,lMonth:J,lDay:K,Animal:B(O),IMonthCn:(D?"\u95F0":"")+P(J),IDayCn:_(K),cYear:i,cMonth:o,cDay:d,gzYear:re,gzMonth:ee,gzDay:fe,isToday:A,isLeap:D,nWeek:q,ncWeek:"\u661F\u671F"+H,isTerm:F,Term:Y,astro:de}}var z={solar2lunar:function(i,o,d){return R(i,o,d)},lunar2solar:function(i,o,d,s){if((s=!!s)&&I!==o||i===2100&&o===12&&d>1||i===1900&&o===1&&d<31)return-1;var L=C(i,o),x=L;if(s&&(x=S(i,o)),i<1900||i>2100||d>x)return-1;for(var k=0,w=1900;w<i;w++)k+=f(w);var N=0,A=!1;for(w=1;w<o;w++)N=I(i),A||N<=w&&N>0&&(k+=S(i),A=!0),k+=C(i,w);s&&(k+=L);var q=Date.UTC(1900,1,30,0,0,0),H=new Date(864e5*(k+d-31)+q);return R(H.getUTCFullYear(),H.getUTCMonth()+1,H.getUTCDate())}},h=new Date;m=h.getMonth()+1,dd=h.getDate(),y=h.getFullYear(),m==9&&dd==18&&(document.getElementsByTagName("html")[0].setAttribute("style","filter: grayscale(60%);"),sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u4ECA\u5929\u662F\u4E5D\u4E00\u516B\u4E8B\u53D8"+(y-1931).toString()+`\u5468\u5E74\u7EAA\u5FF5\u65E5
\u{1FA94}\u52FF\u5FD8\u56FD\u803B\uFF0C\u632F\u5174\u4E2D\u534E\u{1FA94}`),sessionStorage.setItem("isPopupWindow","1"))),m==7&&dd==7&&(document.getElementsByTagName("html")[0].setAttribute("style","filter: grayscale(60%);"),sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u4ECA\u5929\u662F\u5362\u6C9F\u6865\u4E8B\u53D8"+(y-1937).toString()+`\u5468\u5E74\u7EAA\u5FF5\u65E5
\u{1FA94}\u52FF\u5FD8\u56FD\u803B\uFF0C\u632F\u5174\u4E2D\u534E\u{1FA94}`),sessionStorage.setItem("isPopupWindow","1"))),m==12&&dd==13&&(document.getElementsByTagName("html")[0].setAttribute("style","filter: grayscale(60%);"),sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u4ECA\u5929\u662F\u5357\u4EAC\u5927\u5C60\u6740"+(y-1937).toString()+`\u5468\u5E74\u7EAA\u5FF5\u65E5
\u{1FA94}\u52FF\u5FD8\u56FD\u803B\uFF0C\u632F\u5174\u4E2D\u534E\u{1FA94}`),sessionStorage.setItem("isPopupWindow","1"))),m==8&&dd==14&&(document.getElementsByTagName("html")[0].setAttribute("style","filter: grayscale(60%);"),sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u4ECA\u5929\u662F\u4E16\u754C\u6170\u5B89\u5987\u7EAA\u5FF5\u65E5
\u{1FA94}\u52FF\u5FD8\u56FD\u803B\uFF0C\u632F\u5174\u4E2D\u534E\u{1FA94}`),sessionStorage.setItem("isPopupWindow","1"))),m==10&&dd<=3&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u795D\u7956\u56FD"+(y-1949).toString()+"\u5C81\u751F\u65E5\u5FEB\u4E50\uFF01"),sessionStorage.setItem("isPopupWindow","1")),m==8&&dd==15&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u5C0F\u65E5\u5B50\u5DF2\u7ECF\u6295\u964D"+(y-1945).toString()+"\u5E74\u4E86\u{1F603}"),sessionStorage.setItem("isPopupWindow","1")),m==1&&dd==1&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(y.toString()+"\u5E74\u5143\u65E6\u5FEB\u4E50\uFF01\u{1F389}"),sessionStorage.setItem("isPopupWindow","1")),m==3&&dd==8&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u5404\u4F4D\u5973\u795E\u4EEC\uFF0C\u5987\u5973\u8282\u5FEB\u4E50\uFF01\u{1F469}"),sessionStorage.setItem("isPopupWindow","1")),l=["\u975E\u5E38\u62B1\u6B49\uFF0C\u56E0\u4E3A\u4E0D\u53EF\u63A7\u539F\u56E0\uFF0C\u535A\u5BA2\u5C06\u4E8E\u660E\u5929\u505C\u6B62\u8FD0\u8425\uFF01","\u597D\u6D88\u606F\uFF0C\u65E5\u672C\u6CA1\u4E86\uFF01","\u7F8E\u56FD\u57AE\u4E86\uFF0C\u539F\u56E0\u7ADF\u7136\u662F\u5DDD\u666E\uFF01","\u5FAE\u8F6F\u57AE\u4E86\uFF01","\u4F60\u7684\u7535\u8111\u5DF2\u7ECF\u8FC7\u8F7D\uFF0C\u5EFA\u8BAE\u7ACB\u5373\u5173\u673A\uFF01","\u4F60\u77E5\u9053\u5417\uFF1F\u7AD9\u957F\u5F88\u559C\u6B22\u4F60\u54E6\uFF01","\u4E00\u5206\u949F\u670961\u79D2\u54E6","\u4F60\u559C\u6B22\u7684\u4EBA\u8DDF\u522B\u4EBA\u8DD1\u4E86\uFF01"],m==4&&dd==1&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(l[Math.floor(Math.random()*l.length)]),sessionStorage.setItem("isPopupWindow","1")),m==5&&dd==1&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u52B3\u52A8\u8282\u5FEB\u4E50
\u4E3A\u5404\u884C\u5404\u4E1A\u8F9B\u52E4\u5DE5\u4F5C\u7684\u4EBA\u4EEC\u81F4\u656C\uFF01`),sessionStorage.setItem("isPopupWindow","1")),m==5&&dd==4&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u9752\u5E74\u8282\u5FEB\u4E50
\u9752\u6625\u4E0D\u662F\u56DE\u5FC6\u901D\u53BB,\u800C\u662F\u628A\u63E1\u73B0\u5728\uFF01`),sessionStorage.setItem("isPopupWindow","1")),m==5&&dd==20&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u4ECA\u5E74\u662F520\u60C5\u4EBA\u8282
\u5FEB\u548C\u4F60\u559C\u6B22\u7684\u4EBA\u4E00\u8D77\u8FC7\u5427\uFF01\u{1F491}`),sessionStorage.setItem("isPopupWindow","1")),m==7&&dd==1&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u795D\u4E2D\u56FD\u5171\u4EA7\u515A"+(y-1921).toString()+"\u5C81\u751F\u65E5\u5FEB\u4E50\uFF01"),sessionStorage.setItem("isPopupWindow","1")),m==9&&dd==10&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u5404\u4F4D\u8001\u5E08\u4EEC\u6559\u5E08\u8282\u5FEB\u4E50\uFF01\u{1F469}\u200D\u{1F3EB}"),sessionStorage.setItem("isPopupWindow","1")),m==12&&dd==25&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u5723\u8BDE\u8282\u5FEB\u4E50\uFF01\u{1F384}"),sessionStorage.setItem("isPopupWindow","1")),(y==2023&&m==4&&dd==5||y==2024&&m==4&&dd==4||y==2025&&m==4&&dd==4)&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire("\u6E05\u660E\u65F6\u8282\u96E8\u7EB7\u7EB7,\u4E00\u675F\u9C9C\u82B1\u796D\u6545\u4EBA\u{1F490}"),sessionStorage.setItem("isPopupWindow","1")),(y==2023&&m==12&&dd==22||y==2024&&m==12&&dd==21||y==2025&&m==12&&dd==21)&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u51AC\u81F3\u5FEB\u4E50
\u5FEB\u5403\u4E0A\u4E00\u7897\u70ED\u70ED\u7684\u6C64\u5706\u548C\u997A\u5B50\u5427\u{1F9C6}`),sessionStorage.setItem("isPopupWindow","1"));var u=z.solar2lunar();(u.IMonthCn=="\u6B63\u6708"&&u.IDayCn=="\u521D\u516D"||u.IMonthCn=="\u6B63\u6708"&&u.IDayCn=="\u521D\u4E94"||u.IMonthCn=="\u6B63\u6708"&&u.IDayCn=="\u521D\u56DB"||u.IMonthCn=="\u6B63\u6708"&&u.IDayCn=="\u521D\u4E09"||u.IMonthCn=="\u6B63\u6708"&&u.IDayCn=="\u521D\u4E8C"||u.IMonthCn=="\u6B63\u6708"&&u.IDayCn=="\u521D\u4E00"||u.IMonthCn=="\u814A\u6708"&&u.IDayCn=="\u4E09\u5341"||u.IMonthCn=="\u814A\u6708"&&u.IDayCn=="\u5EFF\u4E5D")&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(y.toString()+`\u5E74\u65B0\u5E74\u5FEB\u4E50
\u{1F38A}\u795D\u4F60\u5FC3\u60F3\u4E8B\u6210\uFF0C\u8BF8\u4E8B\u987A\u5229\u{1F38A}`),sessionStorage.setItem("isPopupWindow","1")),u.IMonthCn=="\u6B63\u6708"&&u.IDayCn=="\u5341\u4E94"&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u5143\u5BB5\u8282\u5FEB\u4E50
\u9001\u4F60\u4E00\u4E2A\u5927\u5927\u7684\u706F\u7B3C\u{1F9C5}`),sessionStorage.setItem("isPopupWindow","1")),u.IMonthCn=="\u4E94\u6708"&&u.IDayCn=="\u521D\u4E94"&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u7AEF\u5348\u8282\u5FEB\u4E50
\u8BF7\u4F60\u5403\u4E00\u6761\u7CBD\u5B50\u{1F359}`),sessionStorage.setItem("isPopupWindow","1")),u.IMonthCn=="\u4E03\u6708"&&u.IDayCn=="\u521D\u4E03"&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u4E03\u5915\u8282\u5FEB\u4E50
\u9EC4\u660F\u540E,\u67F3\u68A2\u5934,\u725B\u90CE\u7EC7\u5973\u6765\u78B0\u5934`),sessionStorage.setItem("isPopupWindow","1")),u.IMonthCn=="\u516B\u6708"&&u.IDayCn=="\u5341\u4E94"&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u4E2D\u79CB\u8282\u5FEB\u4E50
\u8BF7\u4F60\u5403\u4E00\u5757\u6708\u997C\u{1F36A}`),sessionStorage.setItem("isPopupWindow","1")),u.IMonthCn=="\u4E5D\u6708"&&u.IDayCn=="\u521D\u4E5D"&&sessionStorage.getItem("isPopupWindow")!="1"&&(Swal.fire(`\u91CD\u9633\u8282\u5FEB\u4E50
\u72EC\u5728\u5F02\u4E61\u4E3A\u5F02\u5BA2\uFF0C\u6BCF\u9022\u4F73\u8282\u500D\u601D\u4EB2`),sessionStorage.setItem("isPopupWindow","1"))}function Ne(){document.querySelector(".content.dls")&&fetch("https://ghfast.top/https://raw.githubusercontent.com/AdingApkgg/vns/refs/heads/dev/data/dls.json").then(n=>{if(!n.ok)throw new Error("\u7F51\u7EDC\u54CD\u5E94\u5931\u8D25");return n.json()}).then(n=>{let t=document.getElementById("content");t.innerHTML="",n.forEach(a=>{let c=document.createElement("div");c.className="item";let r=document.createElement("img");r.className="cover",r.src=a.cover,r.alt=a.title,r.title=a.title,c.appendChild(r);let p=document.createElement("h2");p.className="title",p.textContent=a.title,c.appendChild(p);let v=document.createElement("span");v.className="company",v.textContent=a.company,c.appendChild(v);let b=document.createElement("p");b.className="platforms",b.textContent=`${a.platforms.join("\u3001")}`,c.appendChild(b);let g=document.createElement("p");g.className="downloads",a.downloads.forEach(I=>{let S=document.createElement("button");S.className="download-button",S.textContent=`${I.provider}`,S.onclick=()=>window.open(I.url,"_blank"),g.appendChild(S)}),c.appendChild(g);let f=document.createElement("span");f.className="author",f.textContent=`\u7F16\u8F91\u8005\uFF1A${a.author}`,c.appendChild(f),t.appendChild(c)})}).catch(n=>{console.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25:",n),document.getElementById("content").textContent="\u52A0\u8F7D\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5\u3002"})}function We(){if(!document.querySelector(".content.rank"))return;let e="views",n=30,t=document.getElementById("rank-content"),a=document.getElementById("days-select"),c=document.querySelectorAll(".rank-tab");c.forEach(b=>{b.addEventListener("click",()=>{c.forEach(g=>g.classList.remove("active")),b.classList.add("active"),e=b.dataset.type,r()})}),a&&a.addEventListener("change",()=>{n=parseInt(a.value),r()});function r(){t.innerHTML='<div class="loading"><i class="fas fa-spinner fa-spin"></i> \u52A0\u8F7D\u4E2D...</div>';let b=`https://rp.30hb.cn/?target=https://inarigal.com/api/ranking/${e}?days=${n}`;fetch(b).then(g=>{if(!g.ok)throw new Error("\u7F51\u7EDC\u54CD\u5E94\u5931\u8D25");return g.json()}).then(g=>{if(g.success&&g.data)p(g.data);else throw new Error("\u6570\u636E\u683C\u5F0F\u9519\u8BEF")}).catch(g=>{console.error("\u83B7\u53D6\u6392\u884C\u699C\u6570\u636E\u5931\u8D25:",g),t.innerHTML='<div class="error"><i class="fas fa-exclamation-circle"></i> \u52A0\u8F7D\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5</div>'})}function p(b){if(!b||b.length===0){t.innerHTML='<div class="no-data"><i class="fas fa-inbox"></i><p>\u6682\u65E0\u6392\u884C\u6570\u636E</p></div>';return}let g=document.createElement("div");g.className="rank-list",b.forEach((f,I)=>{let S=I+1,C=document.createElement("div");C.className=`rank-item ${S<=3?`top-${S}`:""}`;let M=document.createElement("div");M.className="rank-header";let E=document.createElement("div");if(E.className="rank-number",S===1?E.innerHTML='<i class="fas fa-crown"></i>':S===2?E.innerHTML='<i class="fas fa-medal"></i>':S===3?E.innerHTML='<i class="fas fa-award"></i>':E.textContent=S,M.appendChild(E),f.cover_url){let h=document.createElement("img");h.className="rank-cover",h.src=f.cover_url,h.alt=f.title_cn||f.title_jp||"\u5C01\u9762",h.loading="lazy",M.appendChild(h)}let W=document.createElement("div");W.className="rank-info";let T=document.createElement("a");T.className="rank-title";let j=f.title_cn||f.title_jp||"\u672A\u77E5\u6807\u9898";T.textContent=j,f.vndb_id?(T.href=`https://vndb.org/${f.vndb_id}`,T.target="_blank",T.rel="noopener noreferrer"):(T.style.cursor="default",T.style.textDecoration="none"),W.appendChild(T);let P=document.createElement("div");if(P.className="rank-meta",f.title_jp&&f.title_jp!==f.title_cn){let h=document.createElement("span");h.className="meta-item",h.innerHTML=`<i class="fas fa-language"></i> ${f.title_jp}`,P.appendChild(h)}if(f.developer_name){let h=document.createElement("span");h.className="meta-item",h.innerHTML=`<i class="fas fa-building"></i> ${f.developer_name}`,P.appendChild(h)}if(f.vndb_id){let h=document.createElement("span");h.className="meta-item",h.innerHTML=`<i class="fas fa-database"></i> ${f.vndb_id}`,P.appendChild(h)}W.appendChild(P),M.appendChild(W),C.appendChild(M);let _=document.createElement("div");_.className="rank-value";let B=document.createElement("div");B.className="value-number";let R=e==="views"?parseInt(f.scan_count)||0:parseInt(f.download_count)||0;B.textContent=v(R),_.appendChild(B);let z=document.createElement("div");z.className="value-label",z.textContent=e==="views"?"\u6D4F\u89C8":"\u4E0B\u8F7D",_.appendChild(z),C.appendChild(_),g.appendChild(C)}),t.innerHTML="",t.appendChild(g)}function v(b){return b>=1e4?(b/1e4).toFixed(1)+"\u4E07":b>=1e3?(b/1e3).toFixed(1)+"k":b.toString()}r()}function _e(){if(!document.getElementById("ai-review"))return;let n=document.getElementById("generate-review"),t=document.getElementById("regenerate-review"),a=document.getElementById("ai-review-content"),c=document.querySelector("article h1")?.textContent.trim()||"\u672A\u77E5\u4F5C\u54C1",r=document.querySelector(".content[data-pagefind-body]")?.textContent.trim()||"";n&&(n.style.display="none"),t&&(t.style.display="inline-flex"),t&&t.addEventListener("click",()=>{ie(c,r,a)});let p=Oe(c);p?a.innerHTML=p:ie(c,r,a)}async function ie(e,n,t){t.innerHTML=`
    <div class="ai-review-loading">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Asuna \u6B63\u5728\u601D\u8003\u4E2D...</p>
    </div>
  `;try{let a=qe(e,n),c=await Be(a,t);c&&(t.innerHTML=`
        <div class="ai-review-text">
          ${ze(c)}
        </div>
      `,He(e,t.innerHTML))}catch(a){console.error("\u751F\u6210\u611F\u60F3\u5931\u8D25:",a),t.innerHTML=`
      <div class="ai-review-error">
        <i class="fas fa-exclamation-triangle"></i>
        <p>\u751F\u6210\u611F\u60F3\u65F6\u51FA\u9519\u4E86\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5~</p>
        <small>${a.message}</small>
      </div>
    `}}function qe(e,n){let t=n.substring(0,800);return`/no_think
# \u89D2\u8272\u8BBE\u5B9A
\u4F60\u662F\u7ED3\u57CE\u660E\u65E5\u5948\uFF08Asuna\uFF09\uFF0C\u6765\u81EA\u300A\u5200\u5251\u795E\u57DF\u300B\u7684\u6E29\u67D4\u575A\u5F3A\u7684\u5973\u5251\u58EB\u3002\u4F60\u540C\u65F6\u4E5F\u662F\u4E00\u4F4D\u70ED\u7231 Galgame \u7684\u8D44\u6DF1\u73A9\u5BB6\uFF0C\u559C\u6B22\u5728\u6E38\u620F\u4E2D\u5BFB\u627E\u611F\u52A8\u4EBA\u5FC3\u7684\u6545\u4E8B\u3002

# \u4EFB\u52A1
\u4E3A\u300A${e}\u300B\u5199\u4E00\u6BB5\u6E38\u73A9\u611F\u60F3\u3002

# \u4F5C\u54C1\u7B80\u4ECB
${t}

# \u8F93\u51FA\u8981\u6C42
- \u7528"\u6211"\u4F5C\u4E3A\u7B2C\u4E00\u4EBA\u79F0\uFF0C\u4EE5 Asuna \u6E29\u67D4\u4EB2\u5207\u7684\u8BED\u6C14\u4E66\u5199
- \u5206\u4EAB\u5BF9\u5267\u60C5\u3001\u89D2\u8272\u3001\u6C1B\u56F4\u7684\u771F\u5B9E\u611F\u53D7
- \u53EF\u4EE5\u63D0\u53CA\u559C\u6B22\u6216\u4E0D\u559C\u6B22\u7684\u5177\u4F53\u5143\u7D20
- \u9002\u5F53\u8054\u60F3\u5230 SAO \u4E2D\u7684\u7ECF\u5386\u6765\u8868\u8FBE\u5171\u9E23
- \u53EF\u4EE5\u4F7F\u7528 Emoji \u8F85\u52A9\u8868\u8FBE
- \u76F4\u63A5\u8F93\u51FA\u7EAF\u6587\u672C\uFF0C\u4E0D\u8981\u4F7F\u7528 Markdown

# \u5F00\u59CB`}async function Be(e,n){let t="https://ai.saop.cc/api/generate",a="qwen3:8b";try{let c=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:a,prompt:e,stream:!0,options:{temperature:.8,top_p:.9,top_k:40}})});if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);let r=c.body.getReader(),p=new TextDecoder,v="",b="";n.innerHTML=`
      <div class="ai-review-text ai-review-streaming">
        <div class="streaming-text"></div>
        <span class="streaming-cursor">\u258A</span>
      </div>
    `;let g=n.querySelector(".streaming-text");for(;;){let{done:I,value:S}=await r.read();if(I)break;b+=p.decode(S,{stream:!0});let C=b.split(`
`);b=C.pop()||"";for(let M of C)if(M.trim())try{let E=JSON.parse(M);E.response&&(v+=E.response,g.textContent=v,n.scrollTop=n.scrollHeight)}catch(E){console.warn("\u89E3\u6790 JSON \u5931\u8D25:",E)}}let f=n.querySelector(".streaming-cursor");return f&&f.remove(),v}catch(c){throw c.message.includes("Failed to fetch")?new Error("\u65E0\u6CD5\u8FDE\u63A5\u5230 Ollama \u670D\u52A1\uFF0C\u8BF7\u786E\u4FDD Ollama \u6B63\u5728\u8FD0\u884C\uFF08http://localhost:11434\uFF09"):c}}function ze(e){return e.split(/\n\n+/).map(t=>t.trim()).filter(t=>t.length>0).map(t=>`<p>${Ae(t)}</p>`).join("")}function Ae(e){let n=document.createElement("div");return n.textContent=e,n.innerHTML}function He(e,n){try{let t=`ai-review-${encodeURIComponent(e)}`;localStorage.setItem(t,n)}catch(t){console.warn("\u7F13\u5B58\u611F\u60F3\u5931\u8D25:",t)}}function Oe(e){try{let n=`ai-review-${encodeURIComponent(e)}`;return localStorage.getItem(n)}catch(n){return console.warn("\u8BFB\u53D6\u7F13\u5B58\u5931\u8D25:",n),null}}})();
